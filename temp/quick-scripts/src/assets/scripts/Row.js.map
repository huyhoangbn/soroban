{"version":3,"sources":["assets\\scripts\\Row.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { ResourcePack } from \"./ResourcePack\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Row extends cc.Component {\r\n    // horizontal on 120\r\n    @property (cc.Label)\r\n    numberLabel: cc.Label = null;\r\n\r\n    beads: cc.Node[] = [];\r\n    number = 0;\r\n\r\n    initialized: boolean = false;\r\n\r\n    initialize() {\r\n        this.node.children.forEach((value: cc.Node) => {\r\n            if(value.name == \"Bead\") {\r\n                this.beads.push(value);\r\n\r\n                value.getComponent(\"Bead\").initialize();\r\n            }\r\n\r\n            this.initialized = true;\r\n        });\r\n    }\r\n\r\n    update(dt) {\r\n        if(!this.initialized) return;\r\n\r\n        this.number = 0;\r\n\r\n        this.beads.forEach((value: cc.Node, index: number) => {\r\n            if(value.getComponent(\"Bead\").placement == 1) {\r\n                if(index < 4) this.number++;\r\n                else this.number += 5;\r\n            }\r\n        });\r\n\r\n        this.numberLabel.string = this.number.toString();\r\n    }\r\n\r\n    setValue(value: number) {\r\n        if(value < 0 || value > 9) {\r\n            console.error(\"Invalid value passed to Row.setValue\");\r\n            return;\r\n        }\r\n\r\n        // reset row\r\n        this.beads.forEach(value => {\r\n            value.getComponent(\"Bead\").setPlacement(0);\r\n        });\r\n\r\n        let index = 0; // keep track of (1) beads to set them in order\r\n        while(value > 0) {\r\n            let node: cc.Node = null;\r\n\r\n            if(value >= 5) {\r\n                node = this.beads[4];\r\n                value -= 5;\r\n            } else {\r\n                node = this.beads[index];\r\n\r\n                index++;\r\n                value--;\r\n            }\r\n\r\n            node.getComponent(\"Bead\").setPlacement(1);\r\n        }\r\n    }\r\n\r\n    setInteractive(value: boolean, which: number) {\r\n        if(!value) {\r\n            this.beads.forEach(node => {\r\n                node.getComponent(\"Bead\").setInteractive(false);\r\n            });\r\n        } else {\r\n            for(let i = this.beads.length - 1; i >= 0; --i) {\r\n                if(((which >> i) & 1) == 1) {\r\n                    this.beads[this.beads.length - 1 - i].getComponent(\"Bead\").setInteractive(true);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    applyTheme(resourcePack: ResourcePack) {\r\n        this.beads.forEach((value: cc.Node) => {\r\n            value.getComponent(\"Bead\").applyTheme(resourcePack);\r\n        });\r\n\r\n        this.node.getChildByName(\"MiddleVBar\").getComponent(cc.Sprite).spriteFrame = resourcePack.vbar;\r\n    }\r\n\r\n    reset() {\r\n        this.beads.forEach((value: cc.Node) => {\r\n            value.getComponent(\"Bead\").reset();\r\n        });\r\n    }\r\n}\r\n"]}